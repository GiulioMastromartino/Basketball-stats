<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Dashboard - Basketball Stats</title>
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='css/style.css') }}"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
            rel="stylesheet"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        />
    </head>
    <body>
        <!-- Header -->
        <div class="header">
            <h1>
                <i class="fas fa-basketball-ball" style="color: #fd7e14"></i>
                Basketball Stats
            </h1>
            <div style="display: flex; gap: 25px; align-items: center">
                <a href="{{ url_for('main.players') }}"
                    ><i class="fas fa-users"></i> Players</a
                >
                <a href="{{ url_for('main.teams') }}"
                    ><i class="fas fa-shield-alt"></i> Teams</a
                >
                <a
                    href="{{ url_for('analytics.dashboard') }}"
                    style="color: #ffc107; font-weight: 600"
                    ><i class="fas fa-chart-pie"></i> Analytics</a
                >
                <a
                    href="{{ url_for('auth.logout') }}"
                    style="
                        background: rgba(255, 255, 255, 0.1);
                        padding: 5px 15px;
                        border-radius: 20px;
                    "
                    >Logout</a
                >
            </div>
        </div>

        <div class="container">
            <!-- Stats Cards -->
            <div class="metrics-row">
                <div class="metric-card">
                    <div class="label">Total Games</div>
                    <div class="value">{{ stats.games }}</div>
                </div>
                <div class="metric-card">
                    <div class="label">Roster Size</div>
                    <div class="value">{{ stats.players }}</div>
                </div>
                <div class="metric-card">
                    <div class="label">Win Record</div>
                    <div
                        class="value"
                        style="color: {{ 'var(--success)' if stats.wins > stats.losses else 'var(--primary)' }}"
                    >
                        {{ stats.wins }} - {{ stats.losses }}
                    </div>
                </div>
                <div class="metric-card">
                    <div class="label">Win Percentage</div>
                    <div class="value">
                        {% if stats.games > 0 %} {{ (stats.wins / stats.games *
                        100)|round(1) }}% {% else %} 0% {% endif %}
                    </div>
                </div>
            </div>

            <!-- Recent Games Table -->
            <div class="panel">
                <div class="panel-header">
                    <h3><i class="fas fa-history"></i> Recent Games</h3>
                    <button
                        onclick="window.location.reload()"
                        style="
                            background: #f8f9fa;
                            border: 1px solid #ddd;
                            padding: 6px 12px;
                            border-radius: 6px;
                            cursor: pointer;
                            color: var(--text-muted);
                        "
                    >
                        <i class="fas fa-sync"></i> Refresh
                    </button>
                </div>

                <div style="overflow-x: auto">
                    <table style="width: 100%; border-collapse: collapse">
                        <thead>
                            <tr
                                style="
                                    background: #f8f9fa;
                                    border-bottom: 2px solid #eee;
                                "
                            >
                                <th
                                    style="
                                        padding: 15px;
                                        text-align: left;
                                        color: var(--text-muted);
                                        font-size: 0.85rem;
                                        text-transform: uppercase;
                                    "
                                >
                                    Date
                                </th>
                                <th
                                    style="
                                        padding: 15px;
                                        text-align: left;
                                        color: var(--text-muted);
                                        font-size: 0.85rem;
                                        text-transform: uppercase;
                                    "
                                >
                                    Opponent
                                </th>
                                <th
                                    style="
                                        padding: 15px;
                                        text-align: center;
                                        color: var(--text-muted);
                                        font-size: 0.85rem;
                                        text-transform: uppercase;
                                    "
                                >
                                    Result
                                </th>
                                <th
                                    style="
                                        padding: 15px;
                                        text-align: center;
                                        color: var(--text-muted);
                                        font-size: 0.85rem;
                                        text-transform: uppercase;
                                    "
                                >
                                    Score
                                </th>
                                <th
                                    style="
                                        padding: 15px;
                                        text-align: right;
                                        color: var(--text-muted);
                                        font-size: 0.85rem;
                                        text-transform: uppercase;
                                    "
                                >
                                    Details
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for game in games %}
                            <tr
                                style="
                                    border-bottom: 1px solid #f1f1f1;
                                    transition: background 0.2s;
                                "
                            >
                                <td style="padding: 15px; font-weight: 500">
                                    {{ game.date }}
                                </td>
                                <td
                                    style="
                                        padding: 15px;
                                        font-weight: 600;
                                        color: var(--text-main);
                                    "
                                >
                                    {{ game.opponent }}
                                </td>
                                <td style="padding: 15px; text-align: center">
                                    <span
                                        style="padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 700;
                                      background: {{ '#d4edda' if game.result == 'W' else '#f8d7da' }};
                                      color: {{ '#155724' if game.result == 'W' else '#721c24' }};"
                                    >
                                        {{ game.result }}
                                    </span>
                                </td>
                                <td
                                    style="
                                        padding: 15px;
                                        text-align: center;
                                        font-family: monospace;
                                        font-size: 1rem;
                                    "
                                >
                                    {{ game.score_display }}
                                </td>
                                <td style="padding: 15px; text-align: right">
                                    <a
                                        href="{{ url_for('main.game_detail', game_id=game.id) }}"
                                        style="
                                            color: var(--primary);
                                            text-decoration: none;
                                            font-weight: 600;
                                            font-size: 0.9rem;
                                        "
                                    >
                                        View Stats
                                        <i
                                            class="fas fa-arrow-right"
                                            style="margin-left: 5px"
                                        ></i>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                {% if not games %}
                <div
                    style="
                        text-align: center;
                        padding: 60px;
                        color: var(--text-muted);
                    "
                >
                    <i
                        class="fas fa-inbox"
                        style="
                            font-size: 48px;
                            margin-bottom: 15px;
                            opacity: 0.5;
                        "
                    ></i>
                    <p>No games found. Import your CSV files to get started.</p>
                </div>
                {% endif %}
            </div>
        </div>
    </body>
</html>
